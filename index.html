<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <title>Forever Mariz</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700;900&family=Quicksand:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-primary: #1a0a0a;
      --bg-gradient: linear-gradient(135deg, #1a0a0a 0%, #2d1515 50%, #1a0a0a 100%);
      --accent-1: #ff4d6d;
      --accent-2: #ff8fa3;
      --gold: #d4a574;
      --text-primary: #fff5f5;
      --text-muted: #ffb3c1;
      --card-bg: rgba(45, 21, 21, 0.7);
      --glass: rgba(255, 77, 109, 0.1);
      --safe-bottom: env(safe-area-inset-bottom, 0px);
    }

    .theme-green {
      --bg-primary: #0a1a12;
      --bg-gradient: linear-gradient(135deg, #0a1a12 0%, #152d1f 50%, #0a1a12 100%);
      --accent-1: #2dd4bf;
      --accent-2: #5eead4;
      --gold: #a7f3d0;
      --text-primary: #f0fdf4;
      --text-muted: #86efac;
      --card-bg: rgba(21, 45, 31, 0.7);
      --glass: rgba(45, 212, 191, 0.1);
    }

    .theme-light {
      --bg-primary: #fff0f0;
      --bg-gradient: linear-gradient(135deg, #fff0f0 0%, #ffe4e6 50%, #fff0f0 100%);
      --text-primary: #4a2c2a;
      --text-muted: #8a5c5a;
      --card-bg: rgba(255, 255, 255, 0.85);
      --glass: rgba(255, 77, 109, 0.08);
    }
    
    .theme-light.theme-green {
      --bg-primary: #f0fdf4;
      --bg-gradient: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 50%, #f0fdf4 100%);
      --text-primary: #1a3a2a;
      --text-muted: #3a6a5a;
      --card-bg: rgba(255, 255, 255, 0.85);
    }

    * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

    body {
      font-family: 'Quicksand', sans-serif;
      background: var(--bg-gradient);
      color: var(--text-primary);
      min-height: 100vh;
      overflow-x: hidden;
      transition: background 0.5s ease, color 0.5s ease;
      -webkit-overflow-scrolling: touch;
    }

    h1, h2, h3, .display-font { font-family: 'Playfair Display', serif; }
    
    .btn-primary {
      background: linear-gradient(135deg, var(--accent-1), var(--accent-2));
      color: white;
      padding: 14px 28px;
      border-radius: 50px;
      font-weight: 700;
      border: none;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 8px 24px rgba(255, 77, 109, 0.3);
      font-size: 15px;
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }
    .theme-green .btn-primary { box-shadow: 0 8px 24px rgba(45, 212, 191, 0.3); }
    .btn-primary:active { transform: scale(0.96); }
    .btn-primary:disabled { opacity: 0.5; cursor: not-allowed; }

    .glass-card {
      background: var(--card-bg);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 24px;
      transition: all 0.3s ease;
    }
    
    .feature-card {
      background: var(--card-bg);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.08);
      border-radius: 20px;
      padding: 16px;
      width: 100%;
      display: flex;
      align-items: center;
      cursor: pointer;
      transition: transform 0.2s;
    }
    .feature-card:active { transform: scale(0.98); }

    .input-field {
      background: rgba(255, 255, 255, 0.05);
      border: 2px solid rgba(255, 255, 255, 0.1);
      border-radius: 16px;
      padding: 16px 20px;
      color: var(--text-primary);
      font-size: 16px;
      width: 100%;
      margin-bottom: 16px;
    }
    .input-field:focus { outline: none; border-color: var(--accent-1); }

    /* Navigation */
    .page {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      overflow-y: auto;
      opacity: 0; visibility: hidden; transform: translateY(20px);
      transition: all 0.4s ease;
      padding-bottom: calc(100px + var(--safe-bottom));
      z-index: 10;
    }
    .page.active { opacity: 1; visibility: visible; transform: translateY(0); position: relative; }

    .navbar {
      position: fixed; bottom: 0; left: 0; width: 100%;
      background: var(--card-bg); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      display: flex; justify-content: space-around; align-items: center;
      padding-top: 10px; padding-bottom: var(--safe-bottom);
      z-index: 100;
    }
    .nav-btn { background: none; border: none; color: var(--text-muted); display: flex; flex-direction: column; align-items: center; gap: 4px; padding: 8px 12px; font-size: 10px; font-weight: 600; }
    .nav-btn.active { color: var(--accent-1); }
    .nav-btn svg { width: 24px; height: 24px; }

    /* Floating Hearts Background */
    .heart-bg {
      position: fixed; pointer-events: none; z-index: 0; opacity: 0; animation: floatUp 12s linear infinite;
    }
    @keyframes floatUp {
      0% { opacity: 0; transform: translateY(100vh) scale(0.5) rotate(0deg); }
      20% { opacity: 0.4; }
      100% { opacity: 0; transform: translateY(-10vh) scale(1.2) rotate(20deg); }
    }

    /* Modal */
    .modal-overlay {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0, 0, 0, 0.7); backdrop-filter: blur(8px);
      display: flex; align-items: center; justify-content: center; padding: 20px;
      opacity: 0; visibility: hidden; transition: all 0.3s; z-index: 200;
    }
    .modal-overlay.active { opacity: 1; visibility: visible; }
    .modal-content {
      background: var(--bg-primary); border: 1px solid rgba(255,255,255,0.1); border-radius: 24px; padding: 24px;
      width: 100%; max-width: 400px; max-height: 80vh; overflow-y: auto;
      transform: scale(0.9); transition: transform 0.3s;
    }
    .modal-overlay.active .modal-content { transform: scale(1); }

    /* Games Specific */
    .game-card {
      background: linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05));
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 20px; padding: 20px; text-align: center;
      transition: transform 0.2s;
    }
    .game-card:active { transform: scale(0.98); }

    /* Tap Game */
    .tap-btn {
      width: 150px; height: 150px; border-radius: 50%; 
      background: linear-gradient(135deg, var(--accent-1), var(--accent-2));
      box-shadow: 0 10px 30px rgba(255, 77, 109, 0.4);
      display: flex; align-items: center; justify-content: center;
      font-size: 60px; color: white;
      transition: transform 0.1s; border: none; cursor: pointer;
    }
    .tap-btn:active { transform: scale(0.9); }

    /* Memory Game */
    .memory-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; perspective: 1000px; }
    .memory-card {
      height: 70px; width: 100%; position: relative; transform-style: preserve-3d;
      transition: transform 0.5s; cursor: pointer;
    }
    .memory-card.flipped { transform: rotateY(180deg); }
    .memory-front, .memory-back {
      position: absolute; width: 100%; height: 100%; backface-visibility: hidden;
      display: flex; align-items: center; justify-content: center;
      border-radius: 10px; font-size: 24px;
    }
    .memory-back { background: var(--accent-1); transform: rotateY(180deg); }
    .memory-front { background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); }

    /* Slots */
    .slot-window {
      background: #000; border: 3px solid var(--gold); border-radius: 12px;
      height: 80px; overflow: hidden; position: relative;
      display: flex; align-items: center; justify-content: center;
    }
    .slot-reel { font-size: 40px; transition: transform 0.1s; }
    
    /* Progress */
    .progress-bar { height: 10px; background: rgba(255,255,255,0.1); border-radius: 5px; overflow: hidden; margin-top: 8px; }
    .progress-fill { height: 100%; background: linear-gradient(90deg, var(--accent-1), var(--accent-2)); transition: width 0.5s; }
  </style>
</head>
<body>

  <!-- Animated Background -->
  <div id="hearts-bg"></div>

  <!-- LOGIN PAGE -->
  <div id="login-page" class="page active flex items-center justify-center">
    <div class="w-full max-w-md p-8">
      <div class="text-center mb-10">
        <h1 class="text-5xl font-bold mb-3 display-font gradient-text">Forever Mariz</h1>
        <p style="color: var(--text-muted)">Our little world</p>
      </div>
      <div class="glass-card p-8">
        <form id="login-form">
          <input type="text" id="username" class="input-field" placeholder="Username">
          <input type="password" id="password" class="input-field" placeholder="Password">
          <p id="login-error" class="text-sm text-center mb-4 hidden" style="color: var(--accent-1)">Invalid credentials.</p>
          <button type="submit" class="btn-primary">Enter</button>
        </form>
      </div>
    </div>
  </div>

  <!-- HOME PAGE -->
  <div id="home-page" class="page">
    <div class="p-6 pt-12 max-w-2xl mx-auto">
      <header class="text-center mb-8">
        <h1 class="text-4xl font-bold display-font mb-2">Welcome Back!</h1>
        <p style="color: var(--text-muted)">Every moment with you is precious.</p>
      </header>

      <!-- Time Together -->
      <div class="glass-card p-6 mb-6 text-center">
        <p class="text-sm uppercase tracking-widest mb-2" style="color: var(--gold)">Time Together</p>
        <p class="mb-4" style="color: var(--accent-2)">Since Feb 28, 2024</p>
        <div class="flex justify-center gap-2">
          <div class="px-3 py-2 rounded-lg bg-black bg-opacity-20"><div class="text-xl font-bold" id="years">00</div><div class="text-xs opacity-70">Yrs</div></div>
          <div class="px-3 py-2 rounded-lg bg-black bg-opacity-20"><div class="text-xl font-bold" id="months">00</div><div class="text-xs opacity-70">Mo</div></div>
          <div class="px-3 py-2 rounded-lg bg-black bg-opacity-20"><div class="text-xl font-bold" id="days">00</div><div class="text-xs opacity-70">Days</div></div>
          <div class="px-3 py-2 rounded-lg bg-black bg-opacity-20"><div class="text-xl font-bold" id="hours">00</div><div class="text-xs opacity-70">Hrs</div></div>
        </div>
      </div>

      <!-- Daily Quote -->
      <div class="glass-card p-6 mb-6 text-center border-l-4" style="border-color: var(--accent-1)">
        <p class="italic opacity-90" id="daily-quote">"Loading quote..."</p>
      </div>

      <!-- Quick Links -->
      <div class="grid grid-cols-2 gap-4 mb-6">
        <button onclick="showPage('notes-page')" class="feature-card flex-col justify-center text-center py-6">
          <div class="text-3xl mb-2">üìù</div>
          <div class="font-bold">Notes</div>
        </button>
        <button onclick="showPage('memories-page')" class="feature-card flex-col justify-center text-center py-6">
          <div class="text-3xl mb-2">üì∏</div>
          <div class="font-bold">Timeline</div>
        </button>
        <button onclick="showPage('bucket-page')" class="feature-card flex-col justify-center text-center py-6">
          <div class="text-3xl mb-2">üèñÔ∏è</div>
          <div class="font-bold">Bucket List</div>
        </button>
        <button onclick="showPage('games-page')" class="feature-card flex-col justify-center text-center py-6 gradient-bg text-white">
          <div class="text-3xl mb-2">üéÆ</div>
          <div class="font-bold">Games Hub</div>
        </button>
      </div>

      <!-- Hearts Status -->
      <button onclick="showPage('rewards-page')" class="w-full glass-card p-4 flex justify-between items-center mb-4" style="border: 1px solid var(--gold)">
        <div class="flex items-center gap-3">
          <div class="text-3xl">üíé</div>
          <div class="text-left">
            <div class="text-sm opacity-70">My Hearts</div>
            <div class="text-xl font-bold gradient-text" id="home-hearts">0</div>
          </div>
        </div>
        <div style="color: var(--gold)" class="font-bold">Rewards ‚Üí</div>
      </button>
    </div>
  </div>

  <!-- GAMES HUB PAGE -->
  <div id="games-page" class="page">
    <div class="p-6 pt-12 max-w-2xl mx-auto">
      <button onclick="showPage('home-page')" class="mb-6 flex items-center gap-2" style="color: var(--accent-1)">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
        Back
      </button>
      
      <div class="text-center mb-8">
        <h1 class="text-3xl font-bold display-font">Games Hub</h1>
        <p style="color: var(--text-muted)">Play to earn Hearts!</p>
      </div>

      <!-- Hearts Balance -->
      <div class="glass-card p-4 text-center mb-8 flex justify-center items-center gap-3">
        <span class="text-3xl">üíé</span>
        <span class="text-3xl font-bold gradient-text" id="game-hearts">0</span>
        <span class="opacity-70">Hearts</span>
      </div>

      <div class="space-y-4">
        <!-- Game 1: Tap Challenge -->
        <div onclick="showPage('tap-game-page')" class="game-card flex items-center gap-4 text-left">
          <div class="text-4xl">üëÜ</div>
          <div>
            <h3 class="font-bold text-lg">Heart Tap Challenge</h3>
            <p class="text-sm opacity-70">Tap fast! 1 Tap = 1 Point</p>
          </div>
        </div>

        <!-- Game 2: Memory -->
        <div onclick="showPage('memory-game-page')" class="game-card flex items-center gap-4 text-left">
          <div class="text-4xl">üß†</div>
          <div>
            <h3 class="font-bold text-lg">Memory Match</h3>
            <p class="text-sm opacity-70">Win = +30 Hearts</p>
          </div>
        </div>

        <!-- Game 3: Slots -->
        <div onclick="showPage('slots-page')" class="game-card flex items-center gap-4 text-left">
          <div class="text-4xl">üé∞</div>
          <div>
            <h3 class="font-bold text-lg">Lucky Slots</h3>
            <p class="text-sm opacity-70">Jackpot = +100 Hearts</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- TAP GAME PAGE -->
  <div id="tap-game-page" class="page">
    <div class="p-6 pt-12 max-w-md mx-auto text-center flex flex-col items-center">
      <button onclick="showPage('games-page')" class="mb-6 self-start" style="color: var(--accent-1)">‚Üê Back to Games</button>
      <h1 class="text-2xl font-bold mb-6 display-font">Heart Tap Challenge</h1>
      
      <div class="glass-card p-6 mb-6 w-full">
        <div class="text-sm opacity-70 mb-1">Time Left</div>
        <div id="tap-timer" class="text-4xl font-bold gradient-text">10.0</div>
      </div>

      <div class="glass-card p-6 mb-8 w-full">
        <div class="text-sm opacity-70 mb-1">Score</div>
        <div id="tap-score" class="text-4xl font-bold">0</div>
      </div>

      <button id="tap-btn" class="tap-btn mb-8" onclick="handleTap()">
        ‚ù§Ô∏è
      </button>

      <button id="start-tap-btn" onclick="startTapGame()" class="btn-primary w-auto px-12">Start Game</button>
    </div>
  </div>

  <!-- MEMORY GAME PAGE -->
  <div id="memory-game-page" class="page">
    <div class="p-6 pt-12 max-w-md mx-auto">
      <button onclick="showPage('games-page')" class="mb-6" style="color: var(--accent-1)">‚Üê Back to Games</button>
      <h1 class="text-2xl font-bold mb-6 text-center">Memory Match</h1>
      
      <div class="glass-card p-4 mb-6">
        <div class="flex justify-between">
          <span>Moves: <span id="mem-moves">0</span></span>
          <span>Pairs: <span id="mem-pairs">0</span>/8</span>
        </div>
      </div>

      <div id="memory-grid" class="memory-grid mb-6"></div>
      <button onclick="initMemoryGame()" class="btn-primary">Restart Game</button>
    </div>
  </div>

  <!-- SLOTS PAGE -->
  <div id="slots-page" class="page">
    <div class="p-6 pt-12 max-w-md mx-auto">
      <button onclick="showPage('games-page')" class="mb-6" style="color: var(--accent-1)">‚Üê Back to Games</button>
      <h1 class="text-2xl font-bold mb-6 text-center">Lucky Hearts</h1>
      
      <div class="glass-card p-6 text-center mb-6">
        <div class="flex justify-center gap-2 mb-4">
          <div class="slot-window w-20"><div id="reel1" class="slot-reel">‚ù§Ô∏è</div></div>
          <div class="slot-window w-20"><div id="reel2" class="slot-reel">üíú</div></div>
          <div class="slot-window w-20"><div id="reel3" class="slot-reel">üíõ</div></div>
        </div>
        <div id="slot-result" class="h-6 font-bold mb-4" style="color: var(--gold)"></div>
        <button onclick="pullSlot()" id="slot-btn" class="btn-primary">Spin (Cost: 5 Hearts)</button>
      </div>
    </div>
  </div>

  <!-- REWARDS PAGE -->
  <div id="rewards-page" class="page">
    <div class="p-6 pt-12 max-w-2xl mx-auto">
      <button onclick="showPage('home-page')" class="mb-6" style="color: var(--accent-1)">‚Üê Back</button>
      
      <div class="text-center mb-8">
        <h1 class="text-3xl font-bold display-font">Rewards Shop</h1>
        <p class="mt-2">Current Balance: <span class="font-bold gradient-text" id="reward-hearts">0</span> üíé</p>
      </div>

      <div id="milestones-list" class="space-y-4"></div>
      
      <h3 class="font-bold text-lg mt-8 mb-4 opacity-70">My Vouchers</h3>
      <div id="vouchers-list"></div>
      <div id="no-vouchers" class="text-center py-12 opacity-50">No vouchers claimed yet.</div>
    </div>
  </div>

  <!-- BUCKET LIST PAGE -->
  <div id="bucket-page" class="page">
    <div class="p-6 pt-12 max-w-2xl mx-auto">
      <button onclick="showPage('home-page')" class="mb-6" style="color: var(--accent-1)">‚Üê Back</button>
      <h1 class="text-3xl font-bold display-font mb-6 text-center">Bucket List</h1>
      
      <form id="bucket-form" class="flex gap-2 mb-6">
        <input type="text" id="bucket-input" class="input-field" placeholder="Add new goal..." style="margin-bottom: 0;">
        <button type="submit" class="btn-primary" style="width: auto; padding: 0 20px;">+</button>
      </form>

      <div id="bucket-list" class="space-y-3"></div>
    </div>
  </div>

  <!-- NOTES PAGE -->
  <div id="notes-page" class="page">
    <div class="p-6 pt-12 max-w-2xl mx-auto">
      <button onclick="showPage('home-page')" class="mb-6" style="color: var(--accent-1)">‚Üê Back</button>
      <h1 class="text-3xl font-bold display-font mb-6">Love Notes</h1>
      <button onclick="openModal('note-modal')" class="btn-primary mb-6">Write Note</button>
      <div id="notes-list" class="space-y-4"></div>
      <div id="no-notes" class="text-center py-12 opacity-50">No notes yet.</div>
    </div>
  </div>

  <!-- MEMORIES PAGE -->
  <div id="memories-page" class="page">
    <div class="p-6 pt-12 max-w-2xl mx-auto">
      <button onclick="showPage('home-page')" class="mb-6" style="color: var(--accent-1)">‚Üê Back</button>
      <h1 class="text-3xl font-bold display-font mb-6">Timeline</h1>
      <button onclick="openModal('memory-modal')" class="btn-primary mb-6">Add Memory</button>
      <div id="memories-list" class="relative"></div>
      <div id="no-memories" class="text-center py-12 opacity-50">No memories yet.</div>
    </div>
  </div>

  <!-- SETTINGS PAGE -->
  <div id="settings-page" class="page">
    <div class="p-6 pt-12 max-w-2xl mx-auto">
      <h1 class="text-3xl font-bold display-font mb-6">Settings</h1>
      
      <div class="space-y-4">
        <div class="feature-card justify-between">
          <div><h4 class="font-semibold">Light Mode</h4></div>
          <button onclick="toggleMode()" class="w-16 h-8 rounded-full relative" style="background: var(--glass)">
            <div id="mode-indicator" class="w-6 h-6 rounded-full gradient-bg absolute top-1 transition-all"></div>
          </button>
        </div>
        <div class="feature-card justify-between">
          <div><h4 class="font-semibold">Green Theme</h4></div>
          <button onclick="toggleTheme()" class="w-16 h-8 rounded-full relative" style="background: var(--glass)">
            <div id="theme-indicator" class="w-6 h-6 rounded-full gradient-bg absolute top-1 transition-all"></div>
          </button>
        </div>
        <button onclick="logout()" class="btn-primary mt-8" style="background: #f87171;">Log Out</button>
      </div>
    </div>
  </div>

  <!-- Navigation Bar -->
  <nav class="navbar" id="navbar" style="display: none;">
    <button class="nav-btn active" onclick="showPage('home-page')">
      <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/></svg>
      <span>Home</span>
    </button>
    <button class="nav-btn" onclick="showPage('games-page')">
      <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
      <span>Games</span>
    </button>
    <button class="nav-btn" onclick="showPage('rewards-page')">
      <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
      <span>Rewards</span>
    </button>
    <button class="nav-btn" onclick="showPage('settings-page')">
      <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/></svg>
      <span>Settings</span>
    </button>
  </nav>

  <!-- Modals -->
  <div id="note-modal" class="modal-overlay" onclick="closeModal(event)">
    <div class="modal-content" onclick="event.stopPropagation()">
      <h2 class="text-xl font-bold mb-4 text-center">Write Note</h2>
      <form id="note-form" onsubmit="saveNote(event)">
        <input type="text" id="note-title" class="input-field" placeholder="Title" required>
        <textarea id="note-msg" class="input-field" rows="3" placeholder="Message..." required></textarea>
        <button class="btn-primary">Save</button>
      </form>
    </div>
  </div>

  <div id="memory-modal" class="modal-overlay" onclick="closeModal(event)">
    <div class="modal-content" onclick="event.stopPropagation()">
      <h2 class="text-xl font-bold mb-4 text-center">Add Memory</h2>
      <form id="memory-form" onsubmit="saveMemory(event)">
        <input type="date" id="memory-date" class="input-field" required>
        <input type="text" id="memory-title" class="input-field" placeholder="Title" required>
        <textarea id="memory-desc" class="input-field" rows="2" placeholder="Details..." required></textarea>
        <button class="btn-primary">Save</button>
      </form>
    </div>
  </div>

  <div id="voucher-modal" class="modal-overlay" onclick="closeModal(event)">
    <div class="modal-content" onclick="event.stopPropagation()">
      <h2 class="text-xl font-bold mb-4" id="v-title">Voucher</h2>
      <p class="mb-6" id="v-desc">Description</p>
      <div class="flex gap-3">
        <button onclick="closeModal()" class="btn-primary" style="background: #333; flex:1;">Close</button>
        <button id="use-v-btn" onclick="useVoucher()" class="btn-primary" style="background: var(--gold); color: #000; flex:1;">Use</button>
      </div>
    </div>
  </div>

  <script>
    // --- Config & State ---
    const CREDS = { u: 'AlyzaMarizSabalberino', p: '071103' };
    const START_DATE = new Date('2024-02-28');
    const MILESTONES = [
      { id: 1, cost: 200, name: "Free McDo Meal", desc: "Enjoy a meal together!" },
      { id: 2, cost: 400, name: "Free Starbucks Voucher", desc: "Coffee date time!" },
      { id: 3, cost: 800, name: "500 Voucher", desc: "Shopping or Date money" },
      { id: 4, cost: 1000, name: "1000 Voucher", desc: "Big treat unlocked!" }
    ];

    let state = {
      hearts: parseInt(localStorage.getItem('fmHearts')) || 0,
      notes: JSON.parse(localStorage.getItem('fmNotes')) || [],
      memories: JSON.parse(localStorage.getItem('fmMems')) || [],
      vouchers: JSON.parse(localStorage.getItem('fmVouchers')) || [],
      bucket: JSON.parse(localStorage.getItem('fmBucket')) || [],
      theme: localStorage.getItem('fmTheme') || 'dark',
      color: localStorage.getItem('fmColor') || 'red'
    };

    // --- Init ---
    if (state.theme === 'light') document.body.classList.add('theme-light');
    if (state.color === 'green') document.body.classList.add('theme-green');
    updateUI();
    updateTimer(); setInterval(updateTimer, 1000);
    startBackgroundHearts();

    // --- Auth ---
    document.getElementById('login-form').onsubmit = (e) => {
      e.preventDefault();
      if (document.getElementById('username').value === CREDS.u && document.getElementById('password').value === CREDS.p) {
        document.getElementById('login-page').classList.remove('active');
        document.getElementById('navbar').style.display = 'flex';
        showPage('home-page');
        initApp();
      } else {
        document.getElementById('login-error').classList.remove('hidden');
      }
    };

    function logout() {
      document.getElementById('navbar').style.display = 'none';
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      document.getElementById('login-page').classList.add('active');
    }

    function initApp() {
      renderNotes();
      renderMemories();
      renderBucket();
      renderMilestones();
      displayQuote();
    }

    // --- Navigation ---
    function showPage(id) {
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      document.getElementById(id).classList.add('active');
      document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
      
      // Active state for navbar
      const navMap = { 'home-page': 0, 'games-page': 1, 'rewards-page': 2, 'settings-page': 3 };
      if (navMap[id] !== undefined) document.querySelectorAll('.nav-btn')[navMap[id]].classList.add('active');
      
      if (id === 'memory-game-page') initMemoryGame();
      if (id === 'tap-game-page') resetTapGame();
    }

    // --- Core Functions ---
    function updateUI() {
      document.getElementById('home-hearts').textContent = state.hearts;
      document.getElementById('game-hearts').textContent = state.hearts;
      document.getElementById('reward-hearts').textContent = state.hearts;
      
      // Toggles
      document.getElementById('mode-indicator').style.transform = state.theme === 'light' ? 'translateX(32px)' : 'translateX(0)';
      document.getElementById('theme-indicator').style.transform = state.color === 'green' ? 'translateX(32px)' : 'translateX(0)';
    }

    function save(key) {
      localStorage.setItem('fm' + key, JSON.stringify(state[key]));
      if(key === 'hearts') localStorage.setItem('fmHearts', state.hearts);
      updateUI();
    }

    function updateTimer() {
      const diff = new Date() - START_DATE;
      document.getElementById('years').textContent = Math.floor(diff / 31536000000);
      document.getElementById('months').textContent = Math.floor((diff % 31536000000) / 2628000000);
      document.getElementById('days').textContent = Math.floor((diff % 2628000000) / 86400000);
      document.getElementById('hours').textContent = Math.floor((diff % 86400000) / 3600000);
    }

    function displayQuote() {
      const quotes = ["I love you not only for what you are, but for what I am when I am with you.", "Love is composed of a single soul inhabiting two bodies.", "Whatever our souls are made of, his and mine are the same.", "To love and be loved is to feel the sun from both sides."];
      document.getElementById('daily-quote').textContent = `"${quotes[Math.floor(Math.random() * quotes.length)]}"`;
    }

    function startBackgroundHearts() {
      setInterval(() => {
        const el = document.createElement('div');
        el.className = 'heart-bg';
        el.style.left = Math.random() * 100 + 'vw';
        el.style.animationDuration = (Math.random() * 5 + 8) + 's';
        el.innerHTML = `<svg width="20" height="20" viewBox="0 0 24 24" fill="var(--accent-1)"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg>`;
        document.getElementById('hearts-bg').appendChild(el);
        setTimeout(() => el.remove(), 12000);
      }, 1500);
    }

    // --- Notes & Memories ---
    function saveNote(e) {
      e.preventDefault();
      state.notes.unshift({ id: Date.now(), title: document.getElementById('note-title').value, msg: document.getElementById('note-msg').value, date: new Date().toLocaleDateString() });
      save('notes'); renderNotes(); closeModal();
    }
    function renderNotes() {
      const l = document.getElementById('notes-list');
      const e = document.getElementById('no-notes');
      if (!state.notes.length) { l.innerHTML = ''; e.classList.remove('hidden'); return; }
      e.classList.add('hidden');
      l.innerHTML = state.notes.map(n => `<div class="glass-card p-4 mb-4"><div class="flex justify-between"><h3 class="font-bold">${n.title}</h3><span class="text-xs opacity-50">${n.date}</span></div><p class="mt-2 opacity-80">${n.msg}</p></div>`).join('');
    }

    function saveMemory(e) {
      e.preventDefault();
      state.memories.push({ id: Date.now(), date: document.getElementById('memory-date').value, title: document.getElementById('memory-title').value, desc: document.getElementById('memory-desc').value });
      state.memories.sort((a,b) => new Date(b.date) - new Date(a.date));
      save('memories'); renderMemories(); closeModal();
    }
    function renderMemories() {
      const l = document.getElementById('memories-list');
      const e = document.getElementById('no-memories');
      if (!state.memories.length) { l.innerHTML = ''; e.classList.remove('hidden'); return; }
      e.classList.add('hidden');
      l.innerHTML = state.memories.map(m => `<div class="relative pl-6 pb-8 border-l-2" style="border-color: var(--accent-1)"><div class="absolute -left-2 top-0 w-4 h-4 rounded-full gradient-bg"></div><div class="glass-card p-4"><p class="text-xs mb-1" style="color:var(--accent-2)">${new Date(m.date).toDateString()}</p><h3 class="font-bold">${m.title}</h3><p class="text-sm opacity-70">${m.desc}</p></div></div>`).join('');
    }

    // --- Bucket List ---
    document.getElementById('bucket-form').onsubmit = (e) => {
      e.preventDefault();
      const input = document.getElementById('bucket-input');
      if(!input.value) return;
      state.bucket.push({ id: Date.now(), text: input.value, done: false });
      save('bucket'); renderBucket();
      input.value = '';
    };
    function renderBucket() {
      const l = document.getElementById('bucket-list');
      l.innerHTML = state.bucket.map(b => `
        <div class="glass-card p-4 flex items-center gap-3 cursor-pointer" onclick="toggleBucket(${b.id})">
          <div class="w-6 h-6 rounded-md border-2 flex items-center justify-center ${b.done ? 'gradient-bg border-transparent' : 'border-white opacity-50'}">
            ${b.done ? '<svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"/></svg>' : ''}
          </div>
          <span class="${b.done ? 'line-through opacity-50' : ''}">${b.text}</span>
        </div>
      `).join('');
    }
    function toggleBucket(id) {
      const item = state.bucket.find(b => b.id === id);
      if(item) item.done = !item.done;
      save('bucket'); renderBucket();
    }

    // --- Rewards System ---
    function renderMilestones() {
      const l = document.getElementById('milestones-list');
      l.innerHTML = MILESTONES.map(m => {
        const canAfford = state.hearts >= m.cost;
        return `
          <div class="glass-card p-4 flex justify-between items-center">
            <div>
              <h3 class="font-bold">${m.name}</h3>
              <p class="text-xs opacity-70">${m.desc}</p>
              <div class="progress-bar w-32 mt-2"><div class="progress-fill" style="width: ${Math.min(100, (state.hearts/m.cost)*100)}%"></div></div>
            </div>
            <button onclick="claimMilestone(${m.id}, ${m.cost}, '${m.name}')" class="btn-primary text-xs" style="width:auto; padding:8px 16px; opacity:${canAfford ? 1 : 0.5}" ${canAfford ? '' : 'disabled'}>
              Claim (${m.cost}üíé)
            </button>
          </div>
        `;
      }).join('');
      renderVouchers();
    }

    function claimMilestone(id, cost, name) {
      if (state.hearts < cost) return;
      state.hearts -= cost;
      state.vouchers.push({ id: Date.now(), title: name, desc: "Redeemable voucher", date: new Date().toLocaleDateString(), used: false });
      save('hearts'); save('vouchers');
      renderMilestones();
    }

    function renderVouchers() {
      const l = document.getElementById('vouchers-list');
      const active = state.vouchers.filter(v => !v.used);
      const empty = document.getElementById('no-vouchers');
      if(!active.length) { l.innerHTML = ''; empty.classList.remove('hidden'); return; }
      empty.classList.add('hidden');
      l.innerHTML = active.map(v => `
        <div class="glass-card p-4 mb-3 flex justify-between items-center" style="border: 1px solid var(--gold)">
          <div>
            <h4 class="font-bold">${v.title}</h4>
            <p class="text-xs opacity-70">${v.date}</p>
          </div>
          <button onclick="previewVoucher(${v.id})" class="text-sm font-bold" style="color: var(--gold)">Preview</button>
        </div>
      `).join('');
    }

    let currentVId = null;
    function previewVoucher(id) {
      const v = state.vouchers.find(x => x.id === id);
      if(!v) return;
      currentVId = id;
      document.getElementById('v-title').textContent = v.title;
      document.getElementById('v-desc').textContent = v.desc;
      openModal('voucher-modal');
    }

    function useVoucher() {
      const v = state.vouchers.find(x => x.id === currentVId);
      if(v) v.used = true;
      save('vouchers');
      closeModal();
      renderMilestones();
    }

    // --- GAMES ---

    // 1. Tap Game
    let tapScore = 0;
    let tapTime = 10;
    let tapInterval = null;
    let isTapGameActive = false;

    function startTapGame() {
      if (isTapGameActive) return;
      isTapGameActive = true;
      tapScore = 0;
      tapTime = 10.0;
      document.getElementById('tap-score').textContent = '0';
      document.getElementById('tap-timer').textContent = '10.0';
      document.getElementById('tap-btn').disabled = false;
      document.getElementById('start-tap-btn').style.display = 'none';
      
      tapInterval = setInterval(() => {
        tapTime -= 0.1;
        if (tapTime <= 0) {
          endTapGame();
        } else {
          document.getElementById('tap-timer').textContent = tapTime.toFixed(1);
        }
      }, 100);
    }

    function handleTap() {
      if (!isTapGameActive) return;
      tapScore++;
      document.getElementById('tap-score').textContent = tapScore;
    }

    function endTapGame() {
      clearInterval(tapInterval);
      isTapGameActive = false;
      document.getElementById('tap-btn').disabled = true;
      
      // Reward Logic: 1 Heart per 10 taps
      const earned = Math.floor(tapScore / 10);
      if (earned > 0) {
        state.hearts += earned;
        save('hearts');
        alert(`Time's up! You earned ${earned} Hearts!`);
      } else {
        alert(`Time's up! You needed 10 taps for 1 Heart.`);
      }
      
      document.getElementById('start-tap-btn').style.display = 'block';
      document.getElementById('start-tap-btn').textContent = 'Play Again';
    }

    function resetTapGame() {
      isTapGameActive = false;
      clearInterval(tapInterval);
      document.getElementById('tap-score').textContent = '0';
      document.getElementById('tap-timer').textContent = '10.0';
      document.getElementById('tap-btn').disabled = true;
      document.getElementById('start-tap-btn').style.display = 'block';
      document.getElementById('start-tap-btn').textContent = 'Start Game';
    }

    // 2. Memory Game
    const emojis = ['‚ù§Ô∏è', 'üíú', 'üíõ', 'üíö', 'üíô', 'üß°', 'üñ§', 'ü§ç'];
    let memCards = [];
    let flipped = [];
    let matched = 0;
    let moves = 0;
    let canFlip = true;

    function initMemoryGame() {
      const pairs = [...emojis, ...emojis].sort(() => Math.random() - 0.5);
      memCards = pairs.map((emoji, i) => ({ id: i, emoji, matched: false }));
      flipped = []; matched = 0; moves = 0; canFlip = true;
      renderMemoryGrid();
    }

    function renderMemoryGrid() {
      document.getElementById('mem-moves').textContent = moves;
      document.getElementById('mem-pairs').textContent = matched;
      const grid = document.getElementById('memory-grid');
      grid.innerHTML = memCards.map((c, i) => `
        <div class="memory-card ${flipped.includes(i) || c.matched ? 'flipped' : ''}" onclick="flipCard(${i})">
          <div class="memory-front">?</div>
          <div class="memory-back">${c.emoji}</div>
        </div>
      `).join('');
    }

    function flipCard(index) {
      if (!canFlip || flipped.includes(index) || memCards[index].matched) return;
      
      flipped.push(index);
      renderMemoryGrid();

      if (flipped.length === 2) {
        moves++;
        document.getElementById('mem-moves').textContent = moves;
        const [a, b] = flipped;
        if (memCards[a].emoji === memCards[b].emoji) {
          memCards[a].matched = true; memCards[b].matched = true;
          matched++;
          document.getElementById('mem-pairs').textContent = matched;
          flipped = [];
          if (matched === 8) winMemory();
        } else {
          canFlip = false;
          setTimeout(() => {
            flipped = [];
            canFlip = true;
            renderMemoryGrid();
          }, 800);
        }
      }
    }

    function winMemory() {
      setTimeout(() => {
        alert("You won! +30 Hearts");
        state.hearts += 30;
        save('hearts');
        initMemoryGame();
      }, 300);
    }

    // 3. Slots
    const slotItems = ['‚ù§Ô∏è', 'üíú', 'üíõ', 'üíé'];
    function pullSlot() {
      if (state.hearts < 5) { alert("Not enough hearts! Need 5."); return; }
      state.hearts -= 5;
      save('hearts');
      
      const res = [slotItems[Math.floor(Math.random()*4)], slotItems[Math.floor(Math.random()*4)], slotItems[Math.floor(Math.random()*4)]];
      
      document.getElementById('reel1').textContent = res[0];
      document.getElementById('reel2').textContent = res[1];
      document.getElementById('reel3').textContent = res[2];
      
      // Check win
      let msg = "";
      if (res[0] === res[1] && res[1] === res[2]) {
        if (res[0] === 'üíé') {
          msg = "JACKPOT! +100 Hearts!";
          state.hearts += 100;
        } else {
          msg = "Triple Win! +50 Hearts!";
          state.hearts += 50;
        }
      } else if (res[0] === res[1] || res[1] === res[2] || res[0] === res[2]) {
        msg = "Pair! +15 Hearts!";
        state.hearts += 15;
      } else {
        msg = "Try again!";
      }
      
      document.getElementById('slot-result').textContent = msg;
      save('hearts');
    }

    // --- Utilities ---
    function toggleMode() {
      state.theme = state.theme === 'dark' ? 'light' : 'dark';
      document.body.classList.toggle('theme-light');
      localStorage.setItem('fmTheme', state.theme);
      updateUI();
    }
    function toggleTheme() {
      state.color = state.color === 'red' ? 'green' : 'red';
      document.body.classList.toggle('theme-green');
      localStorage.setItem('fmColor', state.color);
      updateUI();
    }
    
    function openModal(id) { document.getElementById(id).classList.add('active'); }
    function closeModal(e) { 
      if (!e || e.target.classList.contains('modal-overlay')) 
        document.querySelectorAll('.modal-overlay').forEach(m => m.classList.remove('active')); 
    }
  </script>
</body>
</html>
